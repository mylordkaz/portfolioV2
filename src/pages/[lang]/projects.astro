---
import { Image } from "astro:assets";
import imgProject from "../../assets/projectHero.png";
import Layout from "../../layouts/Layout.astro";
import Header from "../../components/layout/Header.astro";
import Footer from "../../components/layout/Footer.astro";
import translations from "../../i18n";
import { projects } from "../../data/projects";

export function getStaticPaths() {
	return [
		{ params: { lang: "en" } },
		{ params: { lang: "ja" } },
		{ params: { lang: "fr" } },
	];
}

const currentPath = Astro.url.pathname;
const lang = currentPath.split("/")[1] || "en";
const t = translations[lang as keyof typeof translations];
---

<Layout title={`${t.projects.title} - Kevin-Tim Portfolio`}>
	<Header />

	<!-- Hero Section -->
	<section
		class="bg-light-surface-hero dark:bg-dark-surface-hero min-h-[60vh] flex items-center"
	>
		<div class="container mx-auto p-8 md:px-24">
			<div class="flex flex-col md:flex-row items-center gap-12">
				<div class="flex-1">
					<h1
						class="text-5xl font-bold text-light-text-primary dark:text-dark-text-primary mb-4"
					>
						{t.projects.title}
					</h1>
					<h2
						class="text-3xl text-light-text-secondary dark:text-dark-text-secondary mb-4"
					>
						{t.projects.subtitle}
					</h2>
					<p
						class="text-xl text-light-text-secondary dark:text-dark-text-secondary"
					>
						{t.projects.description}
					</p>
				</div>
				<div class="flex-1 max-w-md">
					<div class="aspect-[4/3] overflow-hidden rounded-[30px]">
						<Image
							src={imgProject}
							alt="projects Overview"
							width={500}
							height={375}
							class="w-full h-full object-cover"
							format="webp"
							quality={95}
							loading="eager"
						/>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- Projects Bento Grid Section -->
	<section class="bg-light-surface-main dark:bg-dark-surface-main py-20">
		<div class="container mx-auto p-12 md:px-24">
			<div
				class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 auto-rows-[350px] gap-6"
			>
				{
					projects.map((project) => (
						<div
							class={`
        bg-white dark:bg-dark-surface-header 
        rounded-xl shadow-lg overflow-hidden 
        transition-transform hover:scale-[1.02]
        col-span-1
        ${project.size === "large" ? "lg:col-span-2" : ""}
      `}
						>
							<div class="flex flex-col h-full">
								<Image
									src={project.image}
									alt={project.title}
									width={600}
									height={400}
									class="w-full h-[180px] object-cover"
									format="webp"
									quality={100}
								/>
								<div class="p-4 flex-1">
									<h3 class="text-xl font-bold text-light-text-primary dark:text-dark-text-primary mb-2">
										{project.title}
									</h3>
									<p class="text-light-text-secondary dark:text-dark-text-secondary mb-4">
										{project.description}
									</p>
									<div class="flex flex-wrap gap-2">
										{project.tags.map((tag) => (
											<span class="px-2 py-0.5 bg-light-hover-light dark:bg-dark-hover-light rounded-full text-sm text-light-text-secondary dark:text-dark-text-secondary">
												{tag}
											</span>
										))}
									</div>
								</div>
							</div>
						</div>
					))
				}
			</div>
		</div>
	</section>
	<Footer />
</Layout>
