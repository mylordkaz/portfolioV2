---
const preferredLanguage =
	Astro.request.headers.get("accept-language")?.split(",")[0].split("-")[0] ||
	"en";
const supportedLanguages = ["en", "ja", "fr"];
const language = supportedLanguages.includes(preferredLanguage)
	? preferredLanguage
	: "en";

return Astro.redirect(`/${language}`, 308);
---
