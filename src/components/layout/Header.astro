---
import ThemeToggle from "../common/ThemeToggle.astro";
import LanguageSwitch from "../common/LanguageSwitch.astro";
import translations from "../../i18n";

const currentPath = Astro.url.pathname;
const lang = currentPath.split("/")[1] || "en";
const t = translations[lang as keyof typeof translations];
---

<header class="bg-white dark:bg-gray-800 fixed w-full top-0 z-50 shadow-sm">
	<div class="container mx-auto px-4">
		<div class="flex justify-between items-center h-20">
			<!-- Logo -->
			<a href={`/${lang}`} class="flex items-center gap-2">
				<img
					src="/portfolio-logo.png"
					alt="Portfolio Logo"
					class="h-12 w-auto"
				/>
				<span class="text-xl font-bold">Kevin Tim.</span>
			</a>

			<!-- Desktop Navigation -->
			<nav class="hidden md:block">
				<ul class="flex gap-8">
					<li>
						<a href="#projects" class="hover:text-blue-600">{t.nav.projects}</a>
					</li>
					<li>
						<a href="#expertise" class="hover:text-blue-600"
							>{t.nav.expertise}</a>
					</li>
					<li>
						<a href="#about" class="hover:text-blue-600">{t.nav.about}</a>
					</li>
					<li>
						<a href="#contact" class="hover:text-blue-600">{t.nav.contact}</a>
					</li>
				</ul>
			</nav>

			<!-- Settings and Mobile Menu -->
			<div class="flex items-center gap-4">
				<div class="hidden md:flex items-center gap-2">
					<ThemeToggle />
					<LanguageSwitch />
				</div>

				<button id="mobile-menu-button" class="md:hidden">
					<svg
						xmlns="http://www.w3.org/2000/svg"
						class="h-6 w-6"
						fill="none"
						viewBox="0 0 24 24"
						stroke="currentColor"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="2"
							d="M4 6h16M4 12h16M4 18h16"></path>
					</svg>
				</button>
			</div>
		</div>
	</div>

	<!-- Mobile Menu -->
	<div id="mobile-menu" class="hidden md:hidden">
		<nav
			class="px-4 py-4 bg-white dark:bg-gray-800 border-t dark:border-gray-700"
		>
			<ul class="space-y-4">
				<li>
					<a href="#projects" class="block hover:text-blue-600"
						>{t.nav.projects}</a>
				</li>
				<li>
					<a href="#expertise" class="block hover:text-blue-600"
						>{t.nav.expertise}</a>
				</li>
				<li>
					<a href="#about" class="block hover:text-blue-600">{t.nav.about}</a>
				</li>
				<li>
					<a href="#contact" class="block hover:text-blue-600"
						>{t.nav.contact}</a>
				</li>
			</ul>
			<div
				class="flex items-center gap-4 mt-4 pt-4 border-t dark:border-gray-700"
			>
				<ThemeToggle />
				<LanguageSwitch />
			</div>
		</nav>
	</div>
</header>

<script>
	const mobileMenuButton = document.getElementById("mobile-menu-button");
	const mobileMenu = document.getElementById("mobile-menu");

	if (mobileMenuButton && mobileMenu) {
		mobileMenuButton.addEventListener("click", () => {
			mobileMenu.classList.toggle("hidden");
		});
	}
</script>
